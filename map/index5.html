<!doctype html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
<style>
#container{
	border:4px #ccc solid;
	overflow:hidden;
	position:relative;
	margin:auto
}

#dragContainer{
	position: absolute; 
	left: 0px; 
	top: 0px; 
	z-index: 0; 
	-webkit-transform: translate(0px, 0px) scale(1);
	width:0;
	height:0;
}

.grid{
	width:128px;
	height:128px;
	position: absolute;
	background-color:blue;
	border:1px #ccc solid;
}
</style>
</head>

<body>

<div id="container">
	<div id="dragContainer">

	</div>
</div>

<script>
width = 128 * 4, 
height = 128 * 4, 
gridSize = 128, 
arrayX = [], 
arrayY = [],
array = [];

function main() {
	$('#container').css('width', width).css('height', height);

	for(var i=0; i<width+gridSize; i+=gridSize) {
		arrayX.push(i);
		array.push([]);
		for(var j=0; j<height+gridSize; j+=gridSize) {
			var grid = $('<div class="grid" style="left:' + i + "px; top:" + j + 'px">');
			array[i/gridSize].push(grid);
			$('#dragContainer').append(grid);
			arrayY.push(j);
		}
	}

	var $container = $('#container'), ox = 0, oy = 0, dx, dy;
	$container.mousedown(function(e){
		console.log('mousedown');		
		var x1 = e.pageX, y1 = e.pageY;
		$container.mousemove(function(e){
			console.log('mousemove');
			dx = (e.pageX - x1);
			dy = (e.pageY - y1);
			move(-(ox + dx), -(oy + dy));
			$('#dragContainer').css('-webkit-transform', 'translate(' + (ox + dx) + 'px, ' + (oy + dy) + 'px)');		
		}).mouseup(function(e){
			console.log('mouseup');
			ox += dx, oy += dy;
			
			$container.unbind('mousemove').unbind('mouseup');
		});
	});
}

function move(x, y) {
	if(_move(arrayX, x, gridSize, width)){
		for(var i=0;i<array.length;i++){
			for(var j=0;j<array[i].length;j++){
				array[i][j].css({left:arrayX[j]});
			}
		}
	}

	if(_move(arrayY, y, gridSize, height)){
		for(var i=0;i<array.length;i++){
			for(var j=0;j<array[i].length;j++){
				array[i][j].css({top:arrayY[i]});				
			}
		}
	}
}

function _move(array, offset, size, frame){
	var updated = false;

	if(offset < array[0]) {		
		shift(array, -1);	
		array[0] = array[1] - size;	
		updated = true;
	}

	if(offset + frame > array[array.length- 1] + size) {
		shift(array, 1);
		array[array.length-1] = array[array.length-2] + size;
		updated = true;
	}

	return updated;
}

function shift(array, size) {
	var len = array.length;
	if(size < 0) {
		size = len + size;
	}
	size = size % len;

	if(!size)
		return;

	reverse(array, 0, size -1);
	reverse(array, size, len-1);
	reverse(array, 0, len-1);
}

function reverse(array, start, end) {
	var tmp;
	while(start < end) {
		tmp = array[start];
		array[start] = array[end];
		array[end] = tmp;
		start++;
		end--;
	}
}

$(function(){
	main();
});

</script>

</body>
</html>